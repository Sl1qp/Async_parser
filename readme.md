# Синхронный и асинхронный парсер

### Синхронное и асинхронное скачивание файлов с сайта биржи (https://spimex.com/markets/oil_products/trades/results/), а также последующий парсинг и загрузка данных в БД.

## Запуск
#### Перед запуском подготовье БД:
1. Установить PostgreSQL и создать базу данных
2. В папках ```async_parser``` и ```sync_parser``` создать файл ```.env``` и заполнить данные аналогично ```.env.example```

### Синхронный
##### Запустить файл ```sync_parser/main_sync.py```

### Асинхронный
##### Запустить файл ```async_parser/main_async.py```

## Результат программы
##### В консоль выводятся имена скачанных файлов, содержимое файлов сохраняется в базу данных

## Пример вывода программы:
###### Вывод для синхронной и асинхронной версии одинаков

#### Консоль:
```
БД успешно создана
Файл oil_xls_20250806162000.xls сохранён!
Файл oil_xls_20250805162000.xls сохранён!
Файл oil_xls_20250804162000.xls сохранён!
.........................................
Файл oil_xls_20231213162000.xls сохранён!
Файл oil_xls_20231212162000.xls сохранён!
Файл oil_xls_20231211162000.xls сохранён!
Execution time: 402 seconds
```
#### База данных:
| id      | exchange_product_id | exchange_product_name                                                                 | oil_id | delivery_basis_id | delivery_basis_name            | delivery_type_id | volume | total      | count | date       | created_on                   | updated_on                   |
|---------|---------------------|--------------------------------------------------------------------------------------|--------|-------------------|--------------------------------|------------------|--------|------------|-------|------------|------------------------------|------------------------------|
| 1220228 | HELLBGEK31A         | Гелий жидкий, БП Склады гелий жидкий (самовывоз автотранспортом)                     | HELL   | BGE               | БП Склады гелий жидкий         | A                | 124    | 755160     | 2     | 2025-08-06 | 2025-08-07 12:59:50.226377 | 2025-08-07 12:59:50.226377 |
| 1220229 | HELMBYGK10A         | Гелий газообразный марка Б, БП Склады гелий газообразный (самовывоз автотранспортом) | HELM   | BYG               | БП Склады гелий газообразный   | A                | 3300   | 3227500    | 5     | 2025-08-06 | 2025-08-07 12:59:50.265379 | 2025-08-07 12:59:50.265379 |
| 1220230 | A692ALL060J         | Бензин (АИ-92-К5), ГОСТ 32513-2013/ГОСТ 32513-2023, ст. Аллагуват (ст. отправления ОТП) | A692   | ALL               | ст. Аллагуват                  | J                | 2040   | 136569840  | 21    | 2025-08-06 | 2025-08-07 12:59:50.267381 | 2025-08-07 12:59:50.267381 |

## Сравнение 
| Версия программы | Кол-во запусков, шт | Среднее время, с | Худшее время, с | Лучшее время, с |
|------------------|-----------------|---------------|--------------|--------------|
| Синхронный вариант | 10 | 385 | 456 | 360 |
| Асинхронный вариант | 10 | 160 | 201 | 119 | 
